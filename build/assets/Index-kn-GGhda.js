import{i as M,r as A,o as i,e as g,w as V,b as e,n as v,f as B,g as R,u as o,v as T,a as k,c as h,h as z,d as C,t as d,F as U,T as O,j as S,p as X,k as F,l as H,m as K,q as j,_ as m}from"./admin-DKtmiGTF.js";import{u as N,a as P,b as G,c as L,_ as E}from"./notifier-BjApKgeD.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./preload-helper-B4-cSZR6.js";const Q=["value","disabled"],W={width:"1%",class:"manage-column vertical:middle"},Y={width:"30%",class:"vertical:middle rel"},Z=["title"],ee={key:0},te={width:"10%",class:"vertical:middle"},se={width:"",class:"vertical:middle"},ne={__name:"TheModuleIndexRow",props:{item:{type:Object,required:!0}},emits:["updateStatus"],setup(t,{emit:w}){const u=N(),x=w,a=M("selectedItems");function b(r){r.code==="Space"&&(r.preventDefault(),x("updateStatus"))}return(r,y)=>{const f=A("font-awesome-icon"),_=A("router-link");return i(),g(O,{mode:"out-in"},{default:V(()=>[e("tr",{class:v([[t.item.status?"active":"inactive"],"group"])},[e("th",{scope:"row",class:v([{"pl:6":!t.item.status},"vertical:middle py:8 ybb-check-column"])},[B(e("input",{"onUpdate:modelValue":y[0]||(y[0]=p=>R(a)?a.value=p:null),type:"checkbox",value:t.item.id,disabled:o(u).isBusy},null,8,Q),[[T,o(a)]])],2),e("td",W,[k(o(P),{"aria-disabled":o(u).isBusy,checked:t.item.status,onClick:y[1]||(y[1]=p=>r.$emit("updateStatus")),onKeyup:b,class:v([[t.item.status?"bg:sky-60":"opacity:.5 bg:gray-20"],"rel inline-flex p:0 h:24 w:44 flex-shrink:0 cursor:pointer rounded b:2 b:transparent transition-property:color,background-color,border-color,text-decoration-color,fill,stroke transition-duration:200 transition-timing-function:cubic-bezier(0.4,0,0.2,1) box-shadow:rgb(255,255,255)|0|0|0|2,rgb(14,165,233)|0|0|0|4,rgba(0,0,0,0)|0|0|0|0:focus outline:2|solid|transparent:focus"])},{default:V(()=>[e("span",{class:v([[t.item.status?"translateX(20)":"translateX(0)"],"pointer-events:none rel inline-block font:12 h:20 w:20 rounded bg:white transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter transition-duration:200 transition-timing-function:cubic-bezier(0.4,0,0.2,1) box-shadow:rgb(255,255,255)|0|0|0|0,rgba(59,130,246,0.5)|0|0|0|0,rgba(0,0,0,0.1)|0|1|3|0,rgba(0,0,0,0.1)|0|1|2|-1"])},[e("span",{"aria-hidden":"true",class:v([[t.item.status?"opacity:0 transition-timing-function:ease-out transition-duration:100":"opacity:1 transition-timing-function:ease-in transition-duration:200"],"abs inset:0 flex h:full w:full align-items:center justify-content:center tw-transition-opacity"])},[t.item.isUpdatingStatus?(i(),g(f,{key:1,icon:["fas","spinner"],class:"animation:rotate|linear|1s|infinite fg:gray-60"})):(i(),g(f,{key:0,icon:["fas","xmark"],class:"fg:gray-60"}))],2),e("span",{"aria-hidden":"true",class:v([[t.item.status?"opacity:1 transition-timing-function:ease-in transition-duration:200":"opacity:0 transition-timing-function:ease-out transition-duration:100"],"abs inset:0 flex h:full w:full align-items:center justify-content:center tw-transition-opacity"])},[t.item.isUpdatingStatus?(i(),g(f,{key:1,icon:["fas","spinner"],class:"animation:rotate|linear|1s|infinite fg:sky-60"})):(i(),g(f,{key:0,icon:["fas","check"],class:"fg:sky-60"}))],2)],2)]),_:1},8,["aria-disabled","checked","class"])]),e("td",Y,[e("div",{class:"flex align-items:center",title:t.item.id},[!t.item.icon.hasOwnProperty("kind")||t.item.icon.kind==="font-awesome"?(i(),h("div",ee,[k(f,{icon:t.item.icon.icon,class:v([t.item.icon.class??{},"flex align-items:center mr:6 font:20"])},null,8,["icon","class"])])):z("",!0),t.item.status&&t.item.hasOwnProperty("hasSettingPage")&&t.item.hasSettingPage?(i(),g(_,{key:1,to:{name:`modules.m.${t.item.id}`},class:v({"font:semibold":t.item.status})},{default:V(()=>[C(d(t.item.title),1)]),_:1},8,["to","class"])):(i(),h(U,{key:2},[C(d(t.item.title),1)],64))],8,Z)]),e("td",te,d(t.item.version),1),e("td",se,d(t.item.description),1)],2)]),_:1})}}},ie=J(ne,[["__scopeId","data-v-7b1bd82e"]]),ae=["disabled"],oe=e("hr",{class:"invisible m:0 mt:-2"},null,-1),le={class:"flex flex:col align-items:center {w:full;max-w:screen-sm}>*"},ce={class:"tablenav top"},de={class:"tablenav-pages pb:12"},re={class:"displaying-num"},ue=e("br",{class:"clear"},null,-1),me={class:"wp-list-table widefat table-auto plugins"},he={class:"manage-column column-cb ybb-check-column px:2 vertical:middle"},be=e("td",{class:"manage-column"},null,-1),fe={scope:"col"},ve={scope:"col"},ye={scope:"col"},pe={key:0},ge={key:1},ke={class:"inactive animation:skeleton|2s|infinite"},_e=e("th",{scope:"row",class:"vertical:middle py:8 ybb-check-column"},[e("input",{type:"checkbox",value:"0",disabled:""})],-1),we={width:"1%",class:"manage-column vertical:middle"},xe={class:"translateX(0) pointer-events:none rel inline-block h:20 w:20 rounded bg:white box-shadow:0|0"},$e={"aria-hidden":"true",class:"abs inset:0 flex h:full w:full align-items:center justify-content:center opacity:1"},Se=e("td",{width:"30%"},[e("div",{class:"h:12 bg:slate-30 r:4 w:1/2"})],-1),Ve=e("td",{width:"10%",class:"align-items:center vertical:middle"},[e("div",{class:"h:12 bg:slate-30 r:4 w:1/2"})],-1),Be=e("td",{width:"",class:"align-items:center vertical:middle"},[e("div",{class:"h:12 bg:slate-30 r:4 w:full"})],-1),Ue={key:2},Ae={class:"manage-column column-cb ybb-check-column px:2 vertical:middle"},Te=e("td",{class:"manage-column"},null,-1),Ce={scope:"col"},Ie={scope:"col"},De={scope:"col"},je={class:"tablenav bottom"},Ee={class:"tablenav-pages"},Ne={class:"displaying-num"},Pe=e("br",{class:"clear"},null,-1),Xe={__name:"Index",setup(t){const w=G(),u=N(),x=L(),a=S([]),b=S("-1"),r=S([]);X("selectedItems",r);const y=u.hasTask;F(()=>{u.reset(),f()});function f(){u.add("modules.index:fetch-items"),w.request({method:"GET",url:"/modules/index"}).then(s=>s.data).then(s=>{a.value=s.data.modules.map(n=>(n.isUpdatingStatus=!1,n)),$()}).catch(function(s){x.alert(s.message)}).finally(()=>{u.remove("modules.index:fetch-items"),$()})}function _(s,n=null){n!==s.status&&(u.add("modules.index:update-status"),s.isUpdatingStatus=!0,w.request({method:"PATCH",url:`/modules/update-status/${s.id}`,data:{status:n!==null?n:!s.status}}).then(l=>l.data).then(l=>{s.status=l.status}).catch(function(l){x.alert(l.message)}).finally(()=>{s.isUpdatingStatus=!1,u.remove("modules.index:update-status")}))}const p=H({get(){if(a.value.length>0){let s=!0;for(const[n,l]of a.value.entries())if(r.value.includes(l.id)||(s=!1),!s)break;return s}return!1},set(s){const n=[];s&&a.value.forEach(l=>{n.push(l.id)}),r.value=n}});function $(){r.value=[]}const I=S([{key:"activate",label:"Activate"},{key:"deactivate",label:"Deactivate"}]);function D(){if(b.value!=="-1")switch(b.value){case"deactivate":confirm(m("Are you sure you want to deactivate the selected module(s)?","yabe-bricksbender"))&&(r.value.forEach(async s=>{const n=a.value.find(l=>l.id===s);_(n,!1)}),$());break;case"activate":confirm(m("Are you sure you want to activate the selected module(s)?","yabe-bricksbender"))&&(r.value.forEach(async s=>{const n=a.value.find(l=>l.id===s);_(n,!0)}),$());break}}return(s,n)=>{const l=A("font-awesome-icon"),q=K("ripple");return i(),h(U,null,[B((i(),h("button",{type:"button",disabled:o(u).isBusy,onClick:f,class:"button float:right"},[C(" refresh 🔄️")],8,ae)),[[q]]),oe,e("div",le,[e("div",ce,[k(E,{modelValue:b.value,"onUpdate:modelValue":n[0]||(n[0]=c=>b.value=c),actions:I.value,onBulkActions:D},null,8,["modelValue","actions"]),e("div",de,[e("span",re,d(`${a.value.length} ${o(m)("items","yabe-bricksbender")}`),1)]),ue]),e("table",me,[e("thead",null,[e("tr",null,[e("td",he,[B(e("input",{"onUpdate:modelValue":n[1]||(n[1]=c=>p.value=c),class:"ml:12",type:"checkbox"},null,512),[[T,p.value]])]),be,e("th",fe,d(o(m)("Title","yabe-bricksbender")),1),e("th",ve,d(o(m)("Version","yabe-bricksbender")),1),e("th",ye,d(o(m)("Description","yabe-bricksbender")),1)])]),a.value.length>0&&!o(y)("modules.index:fetch-items")?(i(),h("tbody",pe,[(i(!0),h(U,null,j(a.value,c=>(i(),g(ie,{key:c.id,item:c,onUpdateStatus:qe=>_(c,null)},null,8,["item","onUpdateStatus"]))),128))])):o(y)("modules.index:fetch-items")?(i(),h("tbody",ge,[(i(!0),h(U,null,j(a.value.length?a.value.length:5,c=>(i(),h("tr",ke,[_e,e("td",we,[k(o(P),{checked:!1,class:"opacity:.5 bg:gray-85 rel inline-flex p:0 h:24 w:44 flex-shrink:0 cursor:pointer rounded b:2 b:transparent"},{default:V(()=>[e("span",xe,[e("span",$e,[k(l,{icon:["fas","spinner"],class:"animation:rotate|linear|1s|infinite font:12 fg:gray-60"})])])]),_:1})]),Se,Ve,Be]))),256))])):(i(),h("tbody",Ue)),e("tfoot",null,[e("tr",null,[e("td",Ae,[B(e("input",{"onUpdate:modelValue":n[2]||(n[2]=c=>p.value=c),class:"ml:12",type:"checkbox"},null,512),[[T,p.value]])]),Te,e("th",Ce,d(o(m)("Title","yabe-bricksbender")),1),e("th",Ie,d(o(m)("Version","yabe-bricksbender")),1),e("th",De,d(o(m)("Description","yabe-bricksbender")),1)])])]),e("div",je,[k(E,{modelValue:b.value,"onUpdate:modelValue":n[3]||(n[3]=c=>b.value=c),actions:I.value,onBulkActions:D},null,8,["modelValue","actions"]),e("div",Ee,[e("span",Ne,d(`${a.value.length} ${o(m)("items","yabe-bricksbender")}`),1)]),Pe])])],64)}}};export{Xe as default};
